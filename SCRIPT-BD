-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.mae_persona
(
    id_persona integer NOT NULL,
    no_persona character varying(255) NOT NULL,
    ap_paterno character varying(255) NOT NULL,
    ap_materno character varying(255) NOT NULL,
    co_dni character(9) NOT NULL,
    de_telefono character varying(50),
    de_email character varying(255) NOT NULL,
    fe_nacimiento date,
    di_personal character varying(255),
    PRIMARY KEY (id_persona)
);

CREATE TABLE IF NOT EXISTS public.tbl_capitulo
(
    id_capitulo integer NOT NULL,
    id_legajo integer NOT NULL,
    no_capitulo character varying(255) NOT NULL,
    es_capitulo boolean,
    PRIMARY KEY (id_capitulo)
);

CREATE TABLE IF NOT EXISTS public.tbl_capitulo_valor
(
    id_capitulo_valor integer NOT NULL,
    id_capitulo integer NOT NULL,
    id_valor integer NOT NULL,
    es_capitulo_valor boolean NOT NULL,
    PRIMARY KEY (id_capitulo_valor)
);

CREATE TABLE IF NOT EXISTS public.tbl_categoria
(
    id_categoria integer NOT NULL,
    no_categoria character varying(255) NOT NULL,
    nu_duracion integer NOT NULL,
    PRIMARY KEY (id_categoria)
);

CREATE TABLE IF NOT EXISTS public.tbl_concurso
(
    id_concurso integer NOT NULL,
    fe_inicio date NOT NULL,
    fe_fin date,
    ti_modalidad character varying(255) NOT NULL,
    ti_concurso character varying(255) NOT NULL,
    es_concurso boolean NOT NULL,
    PRIMARY KEY (id_concurso)
);

CREATE TABLE IF NOT EXISTS public.tbl_cronograma
(
    id_cronograma integer NOT NULL,
    fe_inicio timestamp without time zone NOT NULL,
    fe_fin timestamp without time zone NOT NULL,
    de_cronograma character varying(255),
    id_t_cronograma integer NOT NULL,
    PRIMARY KEY (id_cronograma)
);

CREATE TABLE IF NOT EXISTS public.tbl_docente
(
    id_persona integer NOT NULL,
    co_docente character varying(9) NOT NULL,
    es_ordinario boolean NOT NULL,
    id_categoria integer,
    id_ua integer NOT NULL,
    PRIMARY KEY (id_persona)
);

CREATE TABLE IF NOT EXISTS public.tbl_entrevista
(
    id_entrevista integer NOT NULL,
    id_cronograma integer NOT NULL,
    en_entrevista character varying(255),
    PRIMARY KEY (id_entrevista)
);

CREATE TABLE IF NOT EXISTS public.tbl_entrevista_docente
(
    id_entrevista_docente integer NOT NULL,
    id_entrevista integer NOT NULL,
    co_docente character(9) NOT NULL,
    id_t_docente integer NOT NULL,
    id_estado integer NOT NULL,
    id_concurso integer NOT NULL,
    PRIMARY KEY (id_entrevista_docente)
);

CREATE TABLE IF NOT EXISTS public.tbl_estado
(
    id_estado integer NOT NULL,
    no_estado character varying(255) NOT NULL,
    PRIMARY KEY (id_estado)
);

CREATE TABLE IF NOT EXISTS public.tbl_factor
(
    id_factor integer NOT NULL,
    id_capitulo integer NOT NULL,
    id_valor integer NOT NULL,
    no_factor character varying(255) NOT NULL,
    es_factor boolean,
    PRIMARY KEY (id_factor)
);

CREATE TABLE IF NOT EXISTS public.tbl_item
(
    id_item integer NOT NULL,
    id_factor integer NOT NULL,
    de_item character varying(255) NOT NULL,
    es_requerimiento character(4) NOT NULL,
    es_item boolean NOT NULL,
    PRIMARY KEY (id_item)
);

CREATE TABLE IF NOT EXISTS public.tbl_item_valor
(
    id_item_valor integer NOT NULL,
    id_item integer NOT NULL,
    id_valor integer NOT NULL,
    es_item_valor boolean NOT NULL,
    PRIMARY KEY (id_item_valor)
);

CREATE TABLE IF NOT EXISTS public.tbl_legajo
(
    id_legajo integer NOT NULL,
    co_docente character(9) NOT NULL,
    id_cronograma integer NOT NULL,
    fe_legajo timestamp without time zone NOT NULL,
    id_concurso integer NOT NULL,
    id_estado integer NOT NULL,
    PRIMARY KEY (id_legajo)
);

CREATE TABLE IF NOT EXISTS public.tbl_legajo_valor
(
    id_legajo_valor integer NOT NULL,
    id_legajo integer NOT NULL,
    id_valor integer NOT NULL,
    es_legajo_valor boolean,
    PRIMARY KEY (id_legajo_valor)
);

CREATE TABLE IF NOT EXISTS public.tbl_nomina
(
    id_nomina integer NOT NULL,
    id_t_nomina integer,
    no_nomina character varying(255) NOT NULL,
    fe_creacion date NOT NULL,
    PRIMARY KEY (id_nomina)
);

CREATE TABLE IF NOT EXISTS public.tbl_nomina_docente
(
    id_nomina_docente integer NOT NULL,
    id_nomina integer NOT NULL,
    co_docente character(1) NOT NULL,
    id_concurso integer NOT NULL,
    es_nomina_docente boolean NOT NULL,
    PRIMARY KEY (id_nomina_docente)
);

CREATE TABLE IF NOT EXISTS public.tbl_opcion
(
    id_opcion integer NOT NULL,
    id_padre integer,
    no_opcion character varying(255) NOT NULL,
    ico_opcion character varying(255),
    path_opcion character varying(255) NOT NULL,
    es_opcion boolean NOT NULL,
    PRIMARY KEY (id_opcion)
);

CREATE TABLE IF NOT EXISTS public.tbl_rol
(
    id_rol integer NOT NULL,
    no_rol character varying(255) NOT NULL,
    es_rol boolean NOT NULL,
    PRIMARY KEY (id_rol)
);

CREATE TABLE IF NOT EXISTS public.tbl_rol_opcion
(
    id_rol_opcion integer NOT NULL,
    id_rol integer NOT NULL,
    id_opcion integer NOT NULL,
    es_rol_opcion boolean,
    PRIMARY KEY (id_rol_opcion)
);

CREATE TABLE IF NOT EXISTS public.tbl_rol_usuario
(
    id_rol_usuario integer NOT NULL,
    id_persona integer NOT NULL,
    id_rol integer NOT NULL,
    es_rol_usuario boolean,
    PRIMARY KEY (id_rol_usuario)
);

CREATE TABLE IF NOT EXISTS public.tbl_unidad_academica
(
    id_ua integer NOT NULL,
    id_t_ua integer NOT NULL,
    id_padre integer,
    no_ua character varying(255) NOT NULL,
    PRIMARY KEY (id_ua)
);

CREATE TABLE IF NOT EXISTS public.tbl_usuario
(
    id_persona integer NOT NULL,
    us_nombre character varying(255) NOT NULL,
    pw_usuario character varying(255) NOT NULL,
    es_usuario boolean NOT NULL,
    PRIMARY KEY (id_persona)
);

CREATE TABLE IF NOT EXISTS public.tbl_valor
(
    id_valor integer NOT NULL,
    id_t_valor integer NOT NULL,
    in_valor integer NOT NULL,
    es_valor boolean,
    PRIMARY KEY (id_valor)
);

CREATE TABLE IF NOT EXISTS public.tca_cronograma
(
    id_t_cronograma integer NOT NULL,
    no_t_cronograma character varying(255) NOT NULL,
    es_t_cronograma boolean NOT NULL,
    PRIMARY KEY (id_t_cronograma)
);

CREATE TABLE IF NOT EXISTS public.tca_docente
(
    id_t_docente integer NOT NULL,
    no_t_docente character varying(255) NOT NULL,
    es_t_docente boolean,
    PRIMARY KEY (id_t_docente)
);

CREATE TABLE IF NOT EXISTS public.tca_nomina
(
    id_t_nomina integer NOT NULL,
    no_t_nomina character varying(255) NOT NULL,
    PRIMARY KEY (id_t_nomina)
);

CREATE TABLE IF NOT EXISTS public.tca_unidad_academica
(
    id_t_ua integer NOT NULL,
    no_t_ua character varying(255),
    PRIMARY KEY (id_t_ua)
);

CREATE TABLE IF NOT EXISTS public.tca_valor
(
    id_t_valor integer NOT NULL,
    no_t_valor character varying(255),
    es_t_valor boolean NOT NULL,
    PRIMARY KEY (id_t_valor)
);

ALTER TABLE public.tbl_capitulo
    ADD FOREIGN KEY (id_legajo)
    REFERENCES public.tbl_legajo (id_legajo)
    NOT VALID;


ALTER TABLE public.tbl_capitulo_valor
    ADD FOREIGN KEY (id_capitulo)
    REFERENCES public.tbl_capitulo (id_capitulo)
    NOT VALID;


ALTER TABLE public.tbl_capitulo_valor
    ADD FOREIGN KEY (id_valor)
    REFERENCES public.tbl_valor (id_valor)
    NOT VALID;


ALTER TABLE public.tbl_cronograma
    ADD FOREIGN KEY (id_t_cronograma)
    REFERENCES public.tca_cronograma (id_t_cronograma)
    NOT VALID;


ALTER TABLE public.tbl_docente
    ADD FOREIGN KEY (id_categoria)
    REFERENCES public.tbl_categoria (id_categoria)
    NOT VALID;


ALTER TABLE public.tbl_docente
    ADD FOREIGN KEY (id_persona)
    REFERENCES public.mae_persona (id_persona)
    NOT VALID;


ALTER TABLE public.tbl_docente
    ADD FOREIGN KEY (id_ua)
    REFERENCES public.tbl_unidad_academica (id_ua)
    NOT VALID;


ALTER TABLE public.tbl_entrevista
    ADD FOREIGN KEY (id_cronograma)
    REFERENCES public.tbl_cronograma (id_cronograma)
    NOT VALID;


ALTER TABLE public.tbl_entrevista_docente
    ADD FOREIGN KEY (id_concurso)
    REFERENCES public.tbl_concurso (id_concurso)
    NOT VALID;


ALTER TABLE public.tbl_entrevista_docente
    ADD FOREIGN KEY (id_entrevista)
    REFERENCES public.tbl_entrevista (id_entrevista)
    NOT VALID;


ALTER TABLE public.tbl_entrevista_docente
    ADD FOREIGN KEY (id_estado)
    REFERENCES public.tbl_estado (id_estado)
    NOT VALID;


ALTER TABLE public.tbl_entrevista_docente
    ADD FOREIGN KEY (id_t_docente)
    REFERENCES public.tca_docente (id_t_docente)
    NOT VALID;


ALTER TABLE public.tbl_factor
    ADD FOREIGN KEY (id_capitulo)
    REFERENCES public.tbl_capitulo (id_capitulo)
    NOT VALID;


ALTER TABLE public.tbl_factor
    ADD FOREIGN KEY (id_valor)
    REFERENCES public.tbl_valor (id_valor)
    NOT VALID;


ALTER TABLE public.tbl_item
    ADD FOREIGN KEY (id_factor)
    REFERENCES public.tbl_factor (id_factor)
    NOT VALID;


ALTER TABLE public.tbl_item_valor
    ADD FOREIGN KEY (id_item)
    REFERENCES public.tbl_item (id_item)
    NOT VALID;


ALTER TABLE public.tbl_item_valor
    ADD FOREIGN KEY (id_valor)
    REFERENCES public.tbl_valor (id_valor)
    NOT VALID;


ALTER TABLE public.tbl_legajo
    ADD FOREIGN KEY (co_docente)
    REFERENCES public.tbl_docente (co_docente)
    NOT VALID;


ALTER TABLE public.tbl_legajo
    ADD FOREIGN KEY (id_concurso)
    REFERENCES public.tbl_concurso (id_concurso)
    NOT VALID;


ALTER TABLE public.tbl_legajo
    ADD FOREIGN KEY (id_cronograma)
    REFERENCES public.tbl_cronograma (id_cronograma)
    NOT VALID;


ALTER TABLE public.tbl_legajo
    ADD FOREIGN KEY (id_estado)
    REFERENCES public.tbl_estado (id_estado)
    NOT VALID;


ALTER TABLE public.tbl_legajo_valor
    ADD FOREIGN KEY (id_legajo)
    REFERENCES public.tbl_legajo (id_legajo)
    NOT VALID;


ALTER TABLE public.tbl_legajo_valor
    ADD FOREIGN KEY (id_valor)
    REFERENCES public.tbl_valor (id_valor)
    NOT VALID;


ALTER TABLE public.tbl_nomina
    ADD FOREIGN KEY (id_t_nomina)
    REFERENCES public.tca_nomina (id_t_nomina)
    NOT VALID;


ALTER TABLE public.tbl_nomina_docente
    ADD FOREIGN KEY (id_concurso)
    REFERENCES public.tbl_concurso (id_concurso)
    NOT VALID;


ALTER TABLE public.tbl_nomina_docente
    ADD FOREIGN KEY (id_nomina)
    REFERENCES public.tbl_nomina (id_nomina)
    NOT VALID;


ALTER TABLE public.tbl_opcion
    ADD FOREIGN KEY (id_padre)
    REFERENCES public.tbl_opcion (id_opcion)
    NOT VALID;


ALTER TABLE public.tbl_rol_opcion
    ADD FOREIGN KEY (id_opcion)
    REFERENCES public.tbl_opcion (id_opcion)
    NOT VALID;


ALTER TABLE public.tbl_rol_opcion
    ADD FOREIGN KEY (id_rol)
    REFERENCES public.tbl_rol (id_rol)
    NOT VALID;


ALTER TABLE public.tbl_rol_usuario
    ADD FOREIGN KEY (id_rol)
    REFERENCES public.tbl_rol (id_rol)
    NOT VALID;


ALTER TABLE public.tbl_rol_usuario
    ADD FOREIGN KEY (id_persona)
    REFERENCES public.tbl_usuario (id_persona)
    NOT VALID;


ALTER TABLE public.tbl_unidad_academica
    ADD FOREIGN KEY (id_padre)
    REFERENCES public.tbl_unidad_academica (id_ua)
    NOT VALID;


ALTER TABLE public.tbl_unidad_academica
    ADD FOREIGN KEY (id_t_ua)
    REFERENCES public.tca_unidad_academica (id_t_ua)
    NOT VALID;


ALTER TABLE public.tbl_valor
    ADD FOREIGN KEY (id_t_valor)
    REFERENCES public.tca_valor (id_t_valor)
    NOT VALID;

END;